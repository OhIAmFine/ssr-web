<!DOCTYPE html><html n-head=""n-head-ssr><meta n-head="true"charset="utf-8"><meta n-head="true"content="width=device-width,initial-scale=1"name="viewport"><meta n-head="true"content="ffe blog"name="description"hid="description"><title n-head="true">post list</title><link href="/favicon.ico"rel="icon"n-head="true"type="image/x-icon"><link href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"rel="stylesheet"n-head="true"><link href="/_nuxt/style.css"rel="stylesheet"><body n-head=""><div id="__nuxt"server-rendered="true"><div class="progress"data-v-739c3fb7 style="width:0;height:2px;background-color:#000;opacity:0"></div><div class="wrapper"><nav class="main-menu navbar navbar-default"><div class="container"><div class="logo"><a href="/index"><h2>ffe</h2></a></div><div class="nav-item"><ul class="nav navbar-nav navbar-right"><li><a href="/"class="nuxt-link-active">Home</a><li><a href="/page/1">Posts</a><li><a href="/about">About</a></ul></div></div></nav><div class="container post-wrapper"><div><hr><p>&lt;style>img {opacity: 1;transition: opacity 0.2s;max-width: 100%;}img[data-src] {opacity: 0;}&lt;/style><p>图片往往是造成网页加载缓慢的原因，通过延迟图片的加载可以提高用户体验，优先加载重要的内容。<p>&lt;img data-src="/img/tree.png" alt="tree"><p>&lt;img data-src="/img/christina.jpg" alt="christina"><h2 id="1-data-src-img-src-">1.使用data-src属性代替img的src属性</h2><pre><code class="lang-html">&lt;div class="wrapper">
        &lt;img data-src="./img/lazy.jpg" alt="lazy.jpg">
&lt;/div>
</code></pre><pre><code class="lang-css">/*先将待加载图片隐藏，加载完成后显示*/
img {
        opacity: 1;
        transition: opacity 0.2s;
    }

    img[data-src] {
        opacity: 0;
    }
</code></pre><p>说明：img标签并不会将图片嵌入到网页中，而是提供一个占位符即给图片提供一个显示的空间。图片的显示需要浏览器根据src属性来加载。所以上述方式并不会加载图片。<h2 id="2-html-js-img-data-src-src-">2.当html文档加载完成后通过js将img的data-src属性转换为src,从而加载图片</h2><pre><code class="lang-javascript">/*原生js实现*/
[].forEach.call(document.querySelectorAll('img[data-src]'), function(img) {
        img.setAttribute('src', img.getAttribute('data-src'));
        img.onload = function() {
            /*图片加载完成后data-src属性就可以去掉了*/
            img.removeAttribute('data-src');
        };
    });
/*jQuery实现*/
$('img[data-src]').each(function(){
    var $img = $(this);
    $img.attr('src', $img.attr('data-src'));
    $img.load(function(){
        $img.removeAttr('data-src');
    })
});
</code></pre><p>说明：遍历所有包含data-src属性的img元素然后将data-src属性转换为src属性<p>&lt;script> [].forEach.call(document.querySelectorAll('img[data-src]'), function(img) { img.setAttribute('src', img.getAttribute('data-src')); img.onload = function() { /<em>图片加载完成后data-src属性就可以去掉了</em>/ img.removeAttribute('data-src'); }; }); &lt;/script></div></div><footer class="footer">Visit our website for more documentation : <a href="https://nuxtjs.org"target="_blank">nuxtjs.org</a></footer></div></div><script defer>window.__NUXT__={data:[{post:{meta:{title:"图片延迟加载简单实现",date:"2015-11-20T16:21:55.000Z",tags:"js",archives:"pl",id:"32",createTime:"2015-11-21",url:"2015-11-21-图片延迟加载简单实现",strTag:"js"},content:'<hr>\n<p>&lt;style&gt;img {opacity: 1;transition: opacity 0.2s;max-width: 100%;}img[data-src] {opacity: 0;}&lt;/style&gt;\n\n</p>\n<p>图片往往是造成网页加载缓慢的原因，通过延迟图片的加载可以提高用户体验，优先加载重要的内容。</p>\n<p>&lt;img data-src=&quot;/img/tree.png&quot; alt=&quot;tree&quot;&gt;</p>\n<p>&lt;img data-src=&quot;/img/christina.jpg&quot; alt=&quot;christina&quot;&gt;</p>\n<h2 id="1-data-src-img-src-">1.使用data-src属性代替img的src属性</h2>\n<pre><code class="lang-html">&lt;div class=&quot;wrapper&quot;&gt;\n        &lt;img data-src=&quot;./img/lazy.jpg&quot; alt=&quot;lazy.jpg&quot;&gt;\n&lt;/div&gt;\n</code></pre>\n<pre><code class="lang-css">/*先将待加载图片隐藏，加载完成后显示*/\nimg {\n        opacity: 1;\n        transition: opacity 0.2s;\n    }\n\n    img[data-src] {\n        opacity: 0;\n    }\n</code></pre>\n<p>说明：img标签并不会将图片嵌入到网页中，而是提供一个占位符即给图片提供一个显示的空间。图片的显示需要浏览器根据src属性来加载。所以上述方式并不会加载图片。</p>\n<h2 id="2-html-js-img-data-src-src-">2.当html文档加载完成后通过js将img的data-src属性转换为src,从而加载图片</h2>\n<pre><code class="lang-javascript">/*原生js实现*/\n[].forEach.call(document.querySelectorAll(&#39;img[data-src]&#39;), function(img) {\n        img.setAttribute(&#39;src&#39;, img.getAttribute(&#39;data-src&#39;));\n        img.onload = function() {\n            /*图片加载完成后data-src属性就可以去掉了*/\n            img.removeAttribute(&#39;data-src&#39;);\n        };\n    });\n/*jQuery实现*/\n$(&#39;img[data-src]&#39;).each(function(){\n    var $img = $(this);\n    $img.attr(&#39;src&#39;, $img.attr(&#39;data-src&#39;));\n    $img.load(function(){\n        $img.removeAttr(&#39;data-src&#39;);\n    })\n});\n</code></pre>\n<p>说明：遍历所有包含data-src属性的img元素然后将data-src属性转换为src属性</p>\n<p>&lt;script&gt;\n    [].forEach.call(document.querySelectorAll(&#39;img[data-src]&#39;), function(img) {\n        img.setAttribute(&#39;src&#39;, img.getAttribute(&#39;data-src&#39;));\n        img.onload = function() {\n            /<em>图片加载完成后data-src属性就可以去掉了</em>/\n            img.removeAttribute(&#39;data-src&#39;);\n        };\n    });\n&lt;/script&gt;\n</p>\n',summary:"<hr>\n<p>&lt;style&gt;img {opacity: 1;transition: opacity 0.2s;max-width: 100%;}img[data-src] {opacity: 0;}&lt;/style&gt;\n\n</p>\n<p>图片往往是造成网页加载缓慢的原因，通过延迟图片的加载可以提高用户体验，优先加载重要的内容。</p>\n<p>&lt;img data-src=&quot;/img/tree.png&quot; alt=&quot;tree&quot;&gt;</p>\n"}}],error:null,serverRendered:!0}</script><script defer src="/_nuxt/vendor.bundle.js"></script><script defer src="/_nuxt/nuxt.bundle.js"></script>